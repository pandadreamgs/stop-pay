name: AI Service Adder
on:
  issues:
    types: [opened]

jobs:
  process_issue:
    if: contains(github.event.issue.title, 'Add Service:')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Set up Python
        uses: actions/setup-python@v4
      - name: Install dependencies
        run: pip install google-generativeai
      - name: Run AI Script
        env:
          GEMINI_KEY: ${{ secrets.GEMINI_KEY }}
          ISSUE_BODY: ${{ github.event.issue.title }}
        run: python ai_adder.py
      - name: Commit changes
        run: |
          git config --global user.name "PandaBot"
          git config --global user.email "bot@pandadream.gs"
          git add data.json
          git commit -m "AI added new service candidate"
          git push
